%----------------------
% General Informations
%----------------------
\NeedsTeXFormat{LaTeX2e}[1999/01/01]
\ProvidesPackage{CERISICBeamer}[2017/05/03 v0.2]



\mode<presentation>

%-------------------
% Required Packages
%-------------------
\RequirePackage{ifthen}
%\RequirePackage[absolute,overlay]{textpos}
\RequirePackage{graphicx}
\RequirePackage{multicol}
\RequirePackage{color}



%---------------------
% Options Declaration
%---------------------
% \newif\if@scientificpartner \@scientificpartnerfalse
% \DeclareOption{scientificpartner}{\@scientificpartnertrue}
% 
% \newif\if@industrialpartner \@industrialpartnerfalse
% \DeclareOption{industrialpartner}{\@industrialpartnertrue}

% \newif\if@english \@englishfalse
% \DeclareOption{english}{\@englishtrue}

% \if@scientificpartner
% \newcommand{\scientificpartner}[1]{
%   \def\@scientificpartnerimage{#1}
%   }
% \fi
% 
% \if@scientificpartner
% \newcommand{\scientificpartner}[1]{
%   \def\@scientificpartnerimage{#1}
%   }
% \fi
% 
% \if@industrialpartner
% \newcommand{\industrialpartner}[1]{
%   \def\@industrialpartnerimage{#1}
%   }
% \fi


%\DeclareStringOption [<init>]{<key>}[<default>]

%---------------
% General Theme
%---------------
\usefonttheme{professionalfonts}
%\usefonttheme{serif}
\usecolortheme{orchid}
\useoutertheme{default}
%\usecolortheme{sidebartab}

%Définition des options pour les notes
%\setbeameroption{notes on second screen=top}



\definecolor{white}{rgb}{1 1 1}
\definecolor{VertBleu}{rgb}{0.055 0.596 0.576}
\definecolor{blanc}{rgb}{1 1 1}

%Définition de la couleur pour le texte
\setbeamercolor{normal text}{fg=VertBleu}

%Suppression des symboles de navigation
\setbeamertemplate{navigation symbols}{}


%Définition des "templates", "font" et "color" pour les captions
\renewcommand{\figurename}{Fig}
\renewcommand{\tablename}{Tab}

\setbeamertemplate{caption}[numbered]
\setbeamerfont{caption name}{family=\sffamily}
\setbeamercolor{caption name}{fg=VertBleu}


%Définitions des caractéristiques des blocks
\setbeamertemplate{blocks}[rounded]{}
%Changement des couleur au niveau du titre du block
\setbeamercolor{block title}{use=structure,fg=white,bg=VertBleu}
\setbeamercolor{block title alerted}{use=alerted text,fg=white,bg=alerted text.fg!75!black}
\setbeamercolor{block title example}{use=example text,fg=white,bg=example text.fg!75!black}


%Changement des couleur au niveau du corps du block
\setbeamercolor{block body}{parent=normal text,use=block title,bg=block title.bg!10!bg}
\setbeamercolor{block body alerted}{parent=normal text,use=block title alerted,bg=block title alerted.bg!10!bg}
\setbeamercolor{block body example}{parent=normal text,use=block title example,bg=block title example.bg!10!bg}


%Définition des couleurs pour les Enumerate-Items
\setbeamercolor{enumerate item}{fg=VertBleu}

%Définition des couleurs pour les Description-Items
\setbeamercolor{description item}{fg=VertBleu}

%Définition des "template" et "color" pour les items
\setbeamercolor{itemize item}{fg=VertBleu}
\setbeamertemplate{itemize item}[circle]

%Définition des "template" et "color" pour les subitem
\setbeamercolor{itemize subitem}{fg=VertBleu}
\setbeamertemplate{itemize subitem}[triangle]


%Définition du logo
%\logo{\includegraphics[height=0.07\paperheight]{IsicLogo.jpg}}


%Définition des caractéristiques de titre et soustritre de slides
\setbeamertemplate{frametitle}[default][right]
\setbeamerfont{frametitle}{size=\Large, series=\bfseries,family=\sffamily}
\setbeamercolor{frametitle}{fg=VertBleu}
\setbeamerfont{framesubtitle}{size=\large, series=\bfseries,family=\sffamily}
\setbeamercolor{framesubtitle}{fg=VertBleu}





%---Definition du titre du document---%
\newcommand{\titre}[2]{
	\def\@titre{#1}
	\def\@positiontitre{#2}
	}
\def\@titre{
	\@latex@warning@no@line{Package `CERISICBeamer': No \noexpand\titre given}}

%---Definition du titre à placer en haut du slide de table des matières---%
\newcommand{\tocname}[1]{
	\def\@tocname{#1}
	}
\def\@tocname{
	\@latex@warning@no@line{Package `CERISICBeamer': No \noexpand\tocname given}}

%---Definition des espaces présents dans le document---%
\newcommand{\espaces}[4]{
	\def\@EspaceUn{#1}
	\def\@EspaceDeux{#2}
	\def\@EspaceTrois{#3}
	\def\@EspaceQuatre{#4}
	}
\def\@espaces{
	\@latex@warning@no@line{Package `CERISICBeamer': No \noexpand\espaces given}}


%---Definition du soustitre du document---%
\newcommand{\soustitre}[1]{
	\def\@soustitre{#1}
	}
\def\@soustitre{
	\@latex@warning@no@line{Package `CERISICBeamer': No \noexpand\soustitre given}}

%---Definition de l'image---%
\newcommand{\image}[1]{
	\def\@image{#1}
	}
\def\@image{
	\@latex@warning@no@line{Package `CERISICBeamer': No \noexpand\image given}}


%---Definition de la taille d l'image---%
\newcommand{\size}[1]{
	\def\@size{#1}
	}
\def\@size{
	\@latex@warning@no@line{Package `CERISICBeamer': No \noexpand\size given}}


%---Definition du titre des tuteur (tuteur,promotteur,...)---%
\newcommand{\tutortitle}[1]{
	\def\@tutortitle{#1}
	}
\def\@tutortitle{
	\@latex@warning@no@line{Package `CERISICBeamer': No \noexpand\tutortitle given}}


%---Definition du/des tuteur(s)---%
\newcommand{\tutor}[1]{
  \def\@tutor{#1}
  }
\def\@tutor{
  \@latex@warning@no@line{Package `CERISICBeamer': No \noexpand\tutor given}}


%---Definition du titre des auteur (auteur(s), étudiant(s),...)---%
\newcommand{\auteurtitle}[1]{
	\def\@auteurtitle{#1}
	}
\def\@auteurtitle{
	\@latex@warning@no@line{Package `CERISICBeamer': No \noexpand\auteurtitle given}}


%---Definition du/des auteur(s)---%
\newcommand{\auteur}[1]{
  \def\@auteur{#1}
  }
\def\@auteur{
  \@latex@warning@no@line{Package `CERISICBeamer': No \noexpand\auteur given}}


%---Definition de la date---%
\renewcommand{\date}[1]{
  \def\@date{#1}
  }
\def\@date{
  \@latex@warning@no@line{Package `CERISICBeamer': No \noexpand\date given}}


\newcommand{\fundingsponsor}[1]{
  \def\@fundingsponsorimage{#1}
  }

\newcommand{\industrialpartner}[1]{
  \def\@industrialpartnerimage{#1}
  }

\newcommand{\scientificpartner}[1]{
  \def\@scientificpartnerimage{#1}
  }


\setbeamertemplate{footline}
{
\vspace{0.2cm}
\hspace{0.8cm}
\textcolor{VertBleu}{\@date}
}


\renewcommand{\maketitle}
{
% Définition de l'image de fond pour le slide de garde
\setbeamertemplate{background canvas}{\includegraphics[width=\paperwidth,height=\paperheight]{img/CerisicTitleSlide.png}}

\begin{frame}[plain]
	\vspace{\@EspaceUn}
% % % 	\begin{minipage}{0.28\textwidth}
% % % 		\begin{center}
% % % 		%	{\includegraphics[width=\@size]{Images/\@image.png}}
% % % 		\end{center}
% % % 	\end{minipage}
% % % 	\hspace{0.1cm}
	\begin{\@positiontitre}
		\@titre\\
		\@soustitre
	\end{\@positiontitre}
% 	\begin{minipage}{0.68\textwidth}
% 		\begin{flushright}
% 
% 		\end{flushright}
% 	\end{minipage}
%	\vspace{\@EspaceDeux}
%	\begin{center}
%	\begin{minipage}{0.35\textwidth}
%	\begin{flushright}
%		\begin{tabular}{l}
%			\@tutortitle\\
%			\@tutor\\
%		\end{tabular}
%	\end{flushright}
%	\end{minipage}
%	\hspace{\@EspaceTrois}
%	\begin{minipage}{0.35\textwidth}
	\begin{flushright}
%		\begin{tabular}{l}
%			\@auteurtitle\\
			\@auteur
%		\end{tabular}
	\end{flushright}
%	\end{minipage}
%	\end{center}
	\vspace*{\@EspaceQuatre}
	\begin{minipage}{0.32\textwidth}
		\begin{flushleft}
			\@fundingsponsorimage
		\end{flushleft}
		\vspace*{0.3cm}
	\end{minipage}
	\begin{minipage}{0.32\textwidth}
		\begin{center}
			\@date
		\end{center}
	\end{minipage}
	\begin{minipage}{0.32\textwidth}
		\begin{flushright}
			\@scientificpartnerimage
			\@industrialpartnerimage
		\end{flushright}
		\vspace*{0.3cm}
	\end{minipage}
\end{frame}

%Définition du fond pour les slides normaux
\setbeamertemplate{background canvas}{\includegraphics[width=\paperwidth,height=\paperheight]{img/CerisicSlide.png}}


%Affichage du numéro du slide
\newlength{\Decalage}
\setlength{\Decalage}{0.25cm}
\setbeamertemplate{footline}
{
%\vspace{0.11cm}
 \hspace{\Decalage}
 \begin{minipage}{0.0625\paperwidth}
 \begin{center}
   \large{\textcolor{white}{\textbf{\insertframenumber}}}
 \end{center}
 \end{minipage}
 \vspace{0.3cm}
}
}

% % \newcommand{\maketoc}
% % {
% % %Définition des caractéristiques de la sidebar
% % \setbeamercolor{sidebar left}{fg=black,bg=white}
% % %\setbeamercolor{section in sidebar current}{}
% % 
% % \setbeamercolor*{section in sidebar shaded}{fg=black}
% % \setbeamercolor*{section in sidebar}
% %   {parent=section in sidebar shaded,use={sidebar,section in sidebar shaded},fg=black}
% % \setbeamercolor*{subsection in sidebar shaded}{fg=black}
% % \setbeamercolor*{subsection in sidebar}
% %   {bg=VertBleu, fg=black}
% % 
% %    \begin{frame}
% %    \frametitle{\@tocname}
% %    \tableofcontents[sectionstyle=show/show%
% %                    ,subsectionstyle=show/show/show]
% %    \end{frame}
% % }

\newcommand{\finalslide}[0]
{
% Template for final slide
\setbeamertemplate{background canvas}{\includegraphics[width=\paperwidth,height=\paperheight]{img/CerisicSlide.png}}
% Slide number
\setlength{\Decalage}{0.25cm}
\setbeamertemplate{footline}
{
%\vspace{0.11cm}
 \hspace{\Decalage}
 \begin{minipage}{0.0625\paperwidth}
 \begin{center}
   \large{\textcolor{white}{\textbf{\insertframenumber}}}
 \end{center}
 \end{minipage}
 \vspace{0.05cm}
}

\begin{frame}
% \begin{center}
% Merci pour votre attention
% \end{center}
\end{frame}
}

%Définition des "templates", "font" et "color" pour les sections et subsections
\setbeamertemplate{section in toc}[sections numbered]			%Numérote les sections
\setbeamertemplate{subsection in toc}[subsections numbered]		%Numérote les sections

\setbeamercolor{section in toc}{fg=VertBleu}
\setbeamercolor{subsection in toc}{fg=VertBleu}

%\setbeamerfont{section in toc}{family=\rmfamily}
%\setbeamerfont{subsection in toc}{family=\rmfamily}



%------------------
% Hooks Definition
%------------------

\AtBeginPart{
	\begin{frame}
 	\begin{center}
	\begin{LARGE}
% 	{\rm \textbf{Partie \insertpartnumber}}\\
 	\textbf{Part \insertpartnumber}\\
	\vspace{10pt}
 	\textbf{\insertpart}
% 	{\rm \textbf{\insertpart}}
	\end{LARGE}
 	\end{center}
	\end{frame}
}

\AtBeginSection{
   \begin{frame}
   \frametitle{\@tocname}
   \tableofcontents[sectionstyle=show/shaded%
                   ,subsectionstyle=shaded/shaded/shaded]
   \end{frame}
}

\AtBeginSubsection{
   \begin{frame}
   \frametitle{\@tocname}
   \tableofcontents[sectionstyle=show/shaded%
                   ,subsectionstyle=show/shaded/shaded]
   \end{frame}
}

% \AtBeginSubsubsection{
%    \begin{frame}
%    \tableofcontents[sectionstyle=show/shaded%
%                    ,subsectionstyle=show/shaded/shaded%
%                    ,subsubsectionstyle=show/shaded/shaded]
%    \end{frame}
% }



\mode
<all>
